---
- name: "download artifact from repository: {{ cd_playbook_artifact.name }}"
  maven_artifact:
#    repository_url: "{{ cd_bootstrap_artifactory_url }}/{{ cd_playbook_artifact.repo }}"
    repository_url: "{{ cd_bootstrap_artifactory_url }}"
    group_id: "{{ cd_playbook_artifact.group_id }}"
    artifact_id: "{{ cd_playbook_artifact.artifact_id }}"
    version: "{{ cd_playbook_artifact.version }}"
    extension: "{{ cd_playbook_artifact.type }}"
    classifier: "{{ cd_playbook_artifact.classifier }}"
    username: "{{ artifactory_username }}"
    password: "{{ artifactory_password }}"
    dest: "{{ cd_app_home }}/{{ cd_playbook_artifact.name }}"
    timeout: 100
  #    mode: 0755
  become: yes
  become_user: "{{ lb_deploy_scripts_user }}"

- name: "uncompress {{ cd_playbook_artifact.name }}"
  unarchive:
    src: "{{ cd_app_home }}/{{ cd_playbook_artifact.name }}"
    dest: "{{ cd_app_home }}"
    mode: 0755
  become: yes
  become_user: "{{ lb_deploy_scripts_user }}"